<script src="//citscitools.cancerresearchuk.org/static/js/vendor/device.js" type="text/javascript"></script>

<style>

    /*
     * For styling the tutorial modal component
     * Need to make this responsive and cross browser compatable
     */

    .modal {
        width: 800px;
        margin-left: -400px;
        top: 45%;
    }

    .modal .modal-body {
        max-height: 600px;
        display: table;
        padding: 0;
    }

    .modal-header {
        text-align: center;
    }

    .modal.fade.in {
  top: 45%;
}

    /*
     * Modal body split into two sections
     * left is the .modal-image (contains image and carousel)
     * right is the .modal-info (contains text)
     */

    .modal .modal-body .modal-image,
    .modal .modal-body .modal-info {
        float: left;
        word-break: keep-all;
    }

    .modal .modal-body.has-info .modal-image {
        width: 460px;
    }
    .modal .modal-body.has-info .modal-info {
        width: 300px;
        padding: 20px;
    }

    .modal .modal-body .carousel {
        margin-bottom: 0;
    }

    .modal .modal-body .carousel-control {
        top: 92%;
    }

    .carousel-control.left {
        left: 85%;
    }

    .modal .modal-body .modal-image img {
        width: 460px;
        float: left;
    }

    .modal .modal-body .item-content {
        float: right;
        width: 300px;
        padding: 20px;
    }

    /*
     * Adding a message that appears on
     * mobile and tablet devices to say that this is currently
     * a only a desktop application
     */

    /*
     * If devices is mobile or tablet then show message
     */

    .ios .wrappy,
    .ipad .wrappy,
    .mobile .wrappy,
    .tablet .wrappy,
    .andriod .wrappy,
    .androidTablet .wrappy,
    .blackberry .wrappy {
        display: block;
    }

    .wrappy {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
        line-height: 1.2;
        z-index: 1100;
        background-color: rgba(0, 0, 0, 0.9)
    }

    .device-message {
        font-size: 0;
        height: 100%;
        margin: 0 auto;
        position: relative;
        text-align: center;
    }

    .casper {
        height: 100%;
        display: inline-block;
        vertical-align: middle;
    }

    .device-message-inner {
        display: inline-block;
        vertical-align: middle;
        padding: 38px;
        background-color: white;
        width: 50%;
    }
</style>

<div class="wrappy">
    <div class="device-message">
        <div class="casper"></div>
        <div class="device-message-inner">
            <img src="//citscitools.cancerresearchuk.org/static/img/cruk/cruk-logo-tiny.png" alt="CRUK">
            </br>
            <h1>Please view on a desktop computer</h1>

            <h3>We are currently working on development for other devices.</h3>
        </div>
    </div>
</div>

<div class="row">
    <div class="span12">
        <div id="modal" class="modal hide fade">
            <div class="modal-header">
                    <h2>Trailblazer project - Tutorial</h2>
            </div>
            <div id="0" class="modal-body" style="display:none">
                <div class="modal-image">
                    <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/first-image.jpg" alt=""/>
                </div>
                <div class="modal-info">
                    <p>
                        Our scientists need help analysing cancer cells. They have lots of questions but not enough time to look at their piles of images. So, we’d like your help. All you need to do is try to  identify the cancer cells in images like the one below.
                    </p>

                    <p>
                        Before you start, here’s some information about:
                    </p>
                    <ul>
                        <li>What a cell is and its different parts</li>
                        <li>How cancer cells develop</li>
                        <li>Spotting cancer cells vs the other cells you will see</li>
                        <li>Why some bits of the image are blue and others are brown</li>
                    </ul>
                </div>

            </div>


            <!-- First Carousel -->

            <div id="1" class="modal-body" style="display:none">
                <div class="modal-image">
                    <div id="myCarousel" class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                            <div class="active item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/cell-structure.png" alt=""/>
                                <div class="item-content" id="itemContent">
                                    <div class="item-content-inner">
                                        <h1 id="itemTitle">The basic structure of a human cell consists of:</h1>
                                        <ul>
                                            <li>A control room in the centre of the cell called a nucleus</li>
                                            <li>Surrounded by the space where most of the cell’s jobs get done, the cytoplasm</li>
                                            <li>All enclosed in a cell membrane</li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/cell-microvilli.png" alt=""/>
                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
                                        <h1 id="itemTitle">But in reality, cells are far more complex and made up of highly specialised features. These are fine tuned to the specific tasks they need to perform. For example:</h1>

                                        <p id="itemParagraph">Cells making up the surface of the small intestine have finger like shapes on one side called microvilli. These increase the surface area so they can absorb more nutrients from your food </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/nerve-ending.png" alt=""/>
                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
                                        <h1 id="itemTitle">But in reality, cells are far more complex and made up of highly specialised features. These are fine tuned to the specific tasks they need to perform. For example:</h1>

                                        <p id="itemParagraph">Meanwhile, nerve cells are designed to be a rapid message delivery network. They have multiple branches, called dendrites, on one end receiving signals from their neighbours. A long cable like structure called the axon passes the signal on as an electrical message</p>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
                    </div>

                </div>
                <!--<div class="modal-info"></div>-->
            </div>



             <!-- forth Carousel -->

            <div id="2" class="modal-body" style="display:none">
                <div class="modal-image">
                    <div id="myCarousel4" class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                            <div class="active item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/haematoxylin.png" alt=""/>
                                <div class="item-content" id="itemContent">
                                    <div class="item-content-inner">
                                        <h2>
                                            Under a microscope it can be difficult to see the outline and structure of cells. Therefore, scientists add stains that stick to certain parts of the cell and make it easier to see them. One commonly used stain is haematoxylin which turns just the nucleus of cells blue. Here are some examples
                                        </h2>
                                        <p>
                                            This is a section from the surface of the lung. The nuclei of the cells that make up the surface, epithelial cells, can be seen in blue. Specialised, hair-like structures called cilia can also just be made out. In healthy lungs, these are responsible for wafting mucus out of the lungs. The blue nuclei of white blood cells can also be seen
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/haematoxylin2.png" alt=""/>
                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
        <p>
            This image is a close up of a cluster of white blood cells. All the nuclei are stained in blue with haematoxylin making them easy to distinguish. Other cell structures cannot be seen as the stain does not stick to them
        </p>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel4" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel4" data-slide="next">&rsaquo;</a>
                    </div>

                </div>
                <!--<div class="modal-info"></div>-->
            </div>






            <!-- Second Carousel -->

            <div id="3" class="modal-body" style="display:none">
                <div class="modal-image">
                    <div id="myCarousel2" class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                            <div class="active item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/cells-organised.png" alt=""/>
                                <div class="item-content" id="itemContent">
                                    <div class="item-content-inner">
                                        <p>
                                            Cancer develops when mistakes start building up in the nucleus, the control room of the cells, to the point that control over the cell is lost. The cell starts to lose many of its specialised features, stops behaving properly and starts replicating uncontrollably.
You can think about it like a small, organised village with houses of similar shapes and sizes transforming into a sprawling, rapidly expanding city.
                                        </p>
                                        <p>
                                            Healthy cells  are strictly organised and regulated. They all have a similar shape and size and are neatly arranged. Their shape, behaviour and all interactions with their neighbours is tightly monitored and controlled.
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/cells-village.png" alt=""/>
                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">

                                    <p>Cancer cells do not look like healthy cells. With loss of control and regulation the cells start to take on more varied and relaxed  shapes and behaviours. Producing more cells becomes more important than creating healthy, well maintained and fully functioning cells.

Our 'village' is rapidly expanding, with buildings of all shapes and sizes sprouting up wherever they find space. </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/cells-city.png" alt=""/>
                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
                                        <p>
                                            With complete loss of control, individual cancer cells take on all kinds of strange shapes, sizes and behaviours. Eventually this turns into a sprawling mass of cells with only basic underlying infrastructure keeping the mass of cells going. It is hard to predict exactly what they will look like other than they will look disorganised, dissimilar to each other and generally chaotic

Our 'village' has become an uncontrolled, varied, overcrowded city.
                                        </p>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel2" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel2" data-slide="next">&rsaquo;</a>
                    </div>

                </div>
                <!--<div class="modal-info"></div>-->
            </div>




            <!-- Third Carousel -->

            <div id="4" class="modal-body" style="display:none">
                <div class="modal-image">
                    <div id="myCarousel3" class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                            <div class="active item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/cancer-cells.png" alt=""/>
                                <div class="item-content" id="itemContent">
                                    <div class="item-content-inner">
                                        <p>
                                            The cancer cells in the images below are outlined in red. Red arrows are pointing to larger clumps.

However, a tumour consists of more than just cancer cells. There is often a lot of stringy and tough tissue called stroma. The Stromal cells provide structure and support to the cancer cells.

There also tends to be a lot of small, round solid looking white blood cells (but they’ll look blue in these images) near the site of a tumour.
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/cancer-cells2.png" alt=""/>
                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
        <p>
            The cancer cells in the images below have been blocked out in red. The remaining cells are the stringy, whispy cells of the stroma and small, round solid looking blood cells- some of which we've circled in green.

        </p>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel3" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel3" data-slide="next">&rsaquo;</a>
                    </div>

                </div>
                <!--<div class="modal-info"></div>-->
            </div>







             <!-- fifth Carousel -->

            <div id="5" class="modal-body" style="display:none">
                <div class="modal-image">
                    <div id="myCarousel5" class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                            <div class="active item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/last-slide1.png" alt=""/>
                                <div class="item-content" id="itemContent">
                                    <div class="item-content-inner">
                                        <h2>
                                            Scientists researching cancer often want to know if a cell is storing or making a certain molecule. To answer this question they use special stains that only stick to the molecule they want to investigate. These are called immnunostains and turn parts of the cell brown wherever the specific molecule is present. Here are some examples.
                                        </h2>
                                        <p>
                                            This stain sticks to a molecule called p53. Some of these cancer cells have got brown nuclei. This means they have p53 in their nuclei. However, some of the nuclei are still blue so not all the cells have p53 present in their nuclei.
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/last-slide2.png" alt=""/>

                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
                                        <p>
                                            These cells have been stained for a molecule called HDAC4. We can see that the cytoplasm is has turned brown so must contain HDAC4. The nuclei are all blue so the nuclei of these cells do not contain any HDAC4. As we cannot see well defined cell membranes here (like we can with the HER2 example) so we can assume that the cell membranes also do not hold any HDAC4.
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/last-slide3.png" alt=""/>

                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
                                        <p>
                                            This stain identifies a molecule called HER2 which is very important in breast cancer. We can see that there are cancer cells here with brown membranes indicating they are “presenting” HER2 on their cell membranes. To the right are the small blue nuclei of white blood cells that are not presenting HER2.
                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="item">
                                <img src="//citscitools.cancerresearchuk.org/static/img/mvp-02/advanced-tutorial/last-slide4.png" alt=""/>

                                <div class="item-content" id="itemContent">

                                    <div class="item-content-inner">
                                        <p>
                                            This sample has been stained for a molecule called CD8 which plays an important role in our body’s fight against certain types of disease. We can see that some of the white blood cells here have stained brown, so are presenting CD8, but most are not.
                                        </p>
                                        <p>
                                            <b>
                                                The images you will be looking at have been stained for CD8. Any brown spots you see are white blood cells that are carrying this molecule
                                            </b>
                                        </p>
                                    </div>
                                </div>

                            </div>


                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel5" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel5" data-slide="next">&rsaquo;</a>
                    </div>

                </div>
                <!--<div class="modal-info"></div>-->
            </div>





            <div class="modal-footer">
                <a id="prevBtn" href="#" onclick="showStep('prev')" class="btn">Previous</a>
                <a id="nextBtn" href="#" onclick="showStep('next')" class="btn btn-success">Next</a>
                <a id="startContrib" href="../mvp-02b/newtask" class="btn btn-primary" style="display:none"><i class="icon-thumbs-up"></i> Start</a>
            </div>
        </div>
    </div>
</div>

<script>

    var idx;

    // Removing difficulty on mvp-01
    var pathname = window.location.pathname; // Returns path only


    var inTask = "mvp-02b/task/";
    var tutorial = "mvp-02b/newtask";

    if (pathname.indexOf(inTask) >= 0) {
        $("#startContrib").remove();
        $(".modal-footer").prepend('' +
            '<button type="button" class="btn btn-primary pull-right" data-dismiss="modal" aria-hidden="true">' +
            '<i class="icon-thumbs-up"></i>' +
            '   Go back' +
            '</button>');
    }


    var step = -1;
    function showStep(action) {
        $("#" + step).hide();

        if (action == 'next') {
            step += 1;
        }
        if (action == 'prev') {
            step -= 1;
        }

        if (step == 0) {
            $("#prevBtn").hide();
            $(".modal-info .item-content-inner").remove();
        } else {
            $("#prevBtn").show();
        }

        if (step == 0) {
            $(".modal-body").addClass("has-info");
        } else {
            $(".modal-body").removeClass("has-info");
        }

//        if (step == 1) {
//            $(".modal-info").empty();
//            $(".modal-info").append($('.carousel-inner .item.active').children().html());
//        }

        if (step == 5) {
            $("#nextBtn").hide();
            $("#startContrib").show();
        } else {
            $("#nextBtn").show();
            $("#startContrib").hide();
        }
        $("#" + step).show();


    }

    showStep('next');
    $("#modal").modal('show');

    $('.carousel').carousel({
        interval: false
    });


//
//    $('a[data-slide="prev"]').click(function () {
//        //console.log( itemLast );
//        var $currentIndex = $('.carousel-inner .item.active').index();
//        console.log($currentIndex);
//        setTimeout(function(){
//            var a = $('.carousel .active').index('.carousel .item');
//            console.log(a);
//            if( a === 2 ) {
//                var $lastItem = $('.carousel-inner .item:last-child').children().html();
//                 $(".modal-info").empty().delay(1000).append( $lastItem );
//            }
//
//        }, 1000);
//
//        var $prevItem = $('.carousel-inner .item.active').prev().children().html();
//                 $(".modal-info").empty().delay(1000).append( $prevItem );
//
//    });
//    $('a[data-slide="next"]').click(function () {
//        //console.log($('.carousel-inner .item.active'));
//
//        setTimeout(function(){
//            var a = $('.carousel .active').index('.carousel .item');
//            console.log(a);
//            if( a === 0 ) {
//                var $firstItem = $('.carousel-inner .item:first-child').children().html();
//                $(".modal-info").empty().delay(1000).append( $firstItem );
//            }
//        }, 1000);
//
//        var $nextItem = $('.carousel-inner .item.active').next().children().html();
//                $(".modal-info").empty().delay(1000).append( $nextItem );
//
//    });


</script>
